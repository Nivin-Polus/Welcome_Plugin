!function(e,t){function n(){if(!t.getElementById("overlay")){const e=t.createElement("div");e.id="overlay",t.body.appendChild(e)}if(!t.getElementById("popupContainer")){const e=t.createElement("div");e.id="popupContainer";const n=t.createElement("h2");n.id="greeting",n.textContent="Hello, ",e.appendChild(n);const a=t.createElement("h3");a.textContent="Hope you are doing Well!",e.appendChild(a);const i=t.createElement("h4");i.id="holidays",e.appendChild(i);const l=t.createElement("button");l.textContent="Close",l.onclick=o,e.appendChild(l);const r=t.createElement("button");r.textContent="Change Background Color",r.onclick=()=>d("background"),e.appendChild(r);const s=t.createElement("button");s.textContent="Change Text Color",s.onclick=()=>d("text"),e.appendChild(s),t.body.appendChild(e)}}function o(){const e=t.getElementById("popupContainer"),n=t.getElementById("overlay");e&&n&&(e.style.display="none",n.style.display="none")}const{timeOnly:a,dateOnly:i}=function(){const e=new Date;return{timeOnly:e.toLocaleTimeString("en-US",{hour12:!1}),dateOnly:e.toLocaleDateString("en-US")}}(),l=function(){const e=parseInt(a.split(":")[0],10);switch(!0){case e>=0&&e<12:return"Good Morning";case e>=12&&e<16:return"Good Afternoon";case e>=16&&e<20:return"Good Evening";default:return"Good Night"}}();function r(e){const n=t.getElementById("popupContainer");"Christmas"===e||"Christmas Eve"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/christmas.jpg')",c=setInterval((()=>{C||function(){if(C)return;const e=t.createElement("div");e.classList.add("snowflake"),e.textContent="❄️",e.style.left=100*Math.random()+"vw",e.style.animationDuration=3*Math.random()+2+"s",e.style.opacity=Math.random(),t.body.appendChild(e),e.addEventListener("animationend",(()=>{e.remove()}))}()}),300),g=setTimeout((()=>{C=!0,clearInterval(c)}),1500),t.getElementById("holidays").textContent="Merry Christmas! 🎄"):"Onam"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/onam.jpg')",I(),function(){let e=t.getElementById("flowerContainer");e||(e=t.createElement("div"),e.id="flowerContainer",t.body.appendChild(e)),e.style.display="block",u=setInterval(k,300),h=setTimeout(f,7e3)}(),function(){const e=t.getElementById("popupContainer"),n=t.createElement("div");n.id="onamImageContainer";const o=t.createElement("img");o.src="./img/onam12.webp",o.alt="Maveli and Kids",o.id="onamImage";const a=t.createElement("div");a.id="speechBubble",a.textContent="Happy Onam!";const i=t.createElement("div");i.className="speechBubbleArrow",a.appendChild(i),n.appendChild(a),n.appendChild(o),e.insertBefore(n,e.firstChild)}(),t.getElementById("holidays").textContent="Happy Onam! 🎉"):"New Year"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/new_year.jpg')",I(),t.getElementById("holidays").textContent="Happy New Year! 🎉"):"Republic Day"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/republic_day.jpg')",I(),t.getElementById("holidays").textContent="Happy Republic Day! 🇮🇳"):"Independence Day"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/independence_day.jpg')",I(),t.getElementById("holidays").textContent="Happy Independence Day! 🇮🇳"):"Gandhi Jayanti"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/gandhi_jayanti.jpg')",t.getElementById("holidays").textContent="Gandhi Jayanti - Tribute to Mahatma Gandhi! 🕊️"):"Diwali"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/diwali.jpg')",I(),t.getElementById("holidays").textContent="Happy Diwali! 🪔"):"Holi"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/holi.jpg')",I(),t.getElementById("holidays").textContent="Happy Holi! 🎨"):"Pongal"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/pongal.jpg')",t.getElementById("holidays").textContent="Happy Pongal! 🌾"):"Ganesh Chaturthi"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/ganesh_chaturthi.jpg')",t.getElementById("holidays").textContent="Happy Ganesh Chaturthi! 🙏🐘"):"Guru Nanak Jayanti"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/guru_nanak_jayanti.jpg')",t.getElementById("holidays").textContent="Happy Guru Nanak Jayanti! 🙏"):"Mahashivratri"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/mahashivratri.jpg')",t.getElementById("holidays").textContent="Happy Mahashivratri! 🕉️"):"Vasant Panchami"===e?(n.style.backgroundImage="url('https://nivin-polus.github.io/Welcome_Plugin/img/vasant_panchami.jpg')",t.getElementById("holidays").textContent="Happy Vasant Panchami! 🌼"):(n.style.backgroundImage="",t.getElementById("holidays").textContent="Welcome!")}let s="";function d(e){s=e,t.getElementById("colorpicker").click()}let c,g,m=t.getElementById("colorpicker");m||(m=t.createElement("input"),m.type="color",m.id="colorpicker",m.style.display="none",m.onchange=function(){const e=t.getElementById("popupContainer"),n=t.getElementById("colorpicker").value;"background"===s?(e.style.backgroundImage="none",e.style.backgroundColor=n):"text"===s&&(e.style.color=n),s=""},t.body.appendChild(m));let y,p,u,h,C=!1;function I(){t.getElementById("fireworksContainer").style.display="block",y=setInterval(b,500),p=setTimeout(E,1e4)}function E(){const e=t.getElementById("fireworksContainer");clearInterval(y),e.style.display="none",e.innerHTML=""}function b(){t.getElementById("fireworksContainer");const n=Math.random()*e.innerWidth,o=Math.random()*e.innerHeight*.5;for(let e=0;e<30;e++)v(n,o)}function v(e,n){const o=t.getElementById("fireworksContainer"),a=t.createElement("div");a.classList.add("firework");const i=2*Math.random()*Math.PI,l=4*Math.random()+2,r=Math.cos(i)*l,s=Math.sin(i)*l;a.style.left=`${e}px`,a.style.top=`${n}px`,a.style.backgroundColor=function(){const e=["#FF5733","#33FF57","#3357FF","#FF33A1","#FFBD33"];return e[Math.floor(Math.random()*e.length)]}(),o.appendChild(a);let d=0;const c=setInterval((()=>{d+=1,a.style.transform=`translate(${r*d}px, ${s*d}px)`,a.style.opacity=Math.max(1-d/20,0),d>25&&(clearInterval(c),a.remove())}),16)}function f(){const e=t.getElementById("flowerContainer");clearInterval(u),e&&(e.style.display="none",e.innerHTML="")}function k(){const e=t.getElementById("flowerContainer"),n=t.createElement("div");n.classList.add("flower"),n.style.left=100*Math.random()+"vw",n.style.animationDuration=3*Math.random()+2+"s",e.appendChild(n),n.addEventListener("animationend",(()=>{n.remove()}))}e.onload=function(){n(),n(),t.getElementById("popupContainer").style.display="block",t.getElementById("overlay").style.display="block",t.getElementById("greeting").textContent=`Hello, ${l}`,fetch("https://www.googleapis.com/calendar/v3/calendars/en.indian%23holiday@group.v.calendar.google.com/events?key=AIzaSyDK1VxJA97m6HCraScyH1zcHObzPwR57Vk").then((e=>{if(!e.ok)throw new Error("API request failed");return console.log("API request successful"),e.json()})).then((e=>{const n=e.items;if(console.log(n.summary),!n||0===n.length)return void console.log("No holiday data found.");const o=new Date(i);n.forEach((e=>{const n=new Date(e.start.date);if(o.getTime()===n.getTime())console.log("Today is a holiday:",e.summary),t.getElementById("holidays").textContent=`Happy ${e.summary}`,r(e.summary);else{const a=n.getTime()-o.getTime(),i=Math.ceil(a/864e5);i>0&&i<=50&&(r(e.summary),console.log(`Holiday '${e.summary}' is coming up in ${i} days on ${e.start.date}`),t.getElementById("holidays").textContent=`${e.summary} is coming up in ${i} Days`)}}))})).catch((e=>{console.error("Error fetching holiday data:",e)}))}}(window,document);