(()=>{const{timeOnly:e,dateOnly:t}=function(){const e=new Date;return{timeOnly:e.toLocaleTimeString("en-US",{hour12:!1}),dateOnly:e.toLocaleDateString("en-US")}}(),n=function(){const t=parseInt(e.split(":")[0],10);switch(!0){case t>=0&&t<12:return"Good Morning";case t>=12&&t<16:return"Good Afternoon";case t>=16&&t<20:return"Good Evening";default:return"Good Night"}}();function a(e){const t=document.getElementById("popupContainer");"Christmas"===e||"Christmas Eve"===e?(t.style.backgroundImage="url('./img/istockphoto-495053030-612x612.jpg')",o=setInterval((()=>{c||function(){if(c)return;const e=document.createElement("div");e.classList.add("snowflake"),e.textContent="❄️",e.style.left=100*Math.random()+"vw",e.style.animationDuration=3*Math.random()+2+"s",e.style.opacity=Math.random(),document.body.appendChild(e),e.addEventListener("animationend",(()=>{e.remove()}))}()}),300),i=setTimeout((()=>{c=!0,clearInterval(o)}),15e3)):"Onam"===e?(t.style.backgroundImage="url('./img/pngtree-character-with-long-beard-holding-umbrella-king-outram-festival-food-background-picture-image_1447518.jpg')",m(),function(){let e=document.getElementById("flowerContainer");e||(e=document.createElement("div"),e.id="flowerContainer",document.body.appendChild(e)),e.style.display="block",d=setInterval(h,300),s=setTimeout(p,7e3)}(),function(){const e=document.getElementById("popupContainer"),t=document.createElement("div");t.id="onamImageContainer";const n=document.createElement("img");n.src="./img/onam12.webp",n.alt="Maveli and Kids",n.id="onamImage";const a=document.createElement("div");a.id="speechBubble",a.textContent="Happy Onam!";const o=document.createElement("div");o.className="speechBubbleArrow",a.appendChild(o),t.appendChild(a),t.appendChild(n),e.insertBefore(t,e.firstChild)}()):"New Year"===e?(t.style.backgroundImage="url('./img/istockphoto-1084592294-612x612.jpg')",m()):"Republic Day"===e?(t.style.backgroundImage="url('./img/republic-day-hero.jpg')'",m()):"Independence Day"===e?(t.style.backgroundImage="url('./img/independence.jpg')",m()):"Gandhi Jayanti"===e?t.style.backgroundImage="url('./img/gandhi.png')":"Diwali"===e?(t.style.backgroundImage="url('./img/Diwali.jpg')",m()):"Holi"===e?(t.style.backgroundImage="url('./img//pongal1.webp')",m()):t.style.backgroundImage="Pongal"===e?"url('./img/Pongal.jpg')":"Ganesh Chaturthi"===e?"url('./img/GaneshChaturthi.jpg')":"Guru Nanak Jayanti"===e?"url('./img/GuruNanakJayanti.jpg')":"Mahashivratri"===e?"url('./img/Mahashivratri.jpg')":"Vasant Panchami"===e?"url('./img/VasantPanchami.jpg')":""}let o,i,r,l,d,s,c=!1;function m(){document.getElementById("fireworksContainer").style.display="block",r=setInterval(g,500),l=setTimeout(u,1e4)}function u(){const e=document.getElementById("fireworksContainer");clearInterval(r),e.style.display="none",e.innerHTML=""}function g(){document.getElementById("fireworksContainer");const e=Math.random()*window.innerWidth,t=Math.random()*window.innerHeight*.5;for(let n=0;n<30;n++)y(e,t)}function y(e,t){const n=document.getElementById("fireworksContainer"),a=document.createElement("div");a.classList.add("firework");const o=2*Math.random()*Math.PI,i=4*Math.random()+2,r=Math.cos(o)*i,l=Math.sin(o)*i;a.style.left=`${e}px`,a.style.top=`${t}px`,a.style.backgroundColor=function(){const e=["#FF5733","#33FF57","#3357FF","#FF33A1","#FFBD33"];return e[Math.floor(Math.random()*e.length)]}(),n.appendChild(a);let d=0;const s=setInterval((()=>{d+=1,a.style.transform=`translate(${r*d}px, ${l*d}px)`,a.style.opacity=Math.max(1-d/20,0),d>25&&(clearInterval(s),a.remove())}),16)}function p(){const e=document.getElementById("flowerContainer");clearInterval(d),e&&(e.style.display="none",e.innerHTML="")}function h(){const e=document.getElementById("flowerContainer"),t=document.createElement("div");t.classList.add("flower"),t.style.left=100*Math.random()+"vw",t.style.animationDuration=3*Math.random()+2+"s",e.appendChild(t),t.addEventListener("animationend",(()=>{t.remove()}))}window.onload=function(){document.getElementById("popupContainer").style.display="block",document.getElementById("overlay").style.display="block",document.getElementById("greeting").textContent=`Hello, ${n}`,fetch("https://www.googleapis.com/calendar/v3/calendars/en.indian%23holiday@group.v.calendar.google.com/events?key=AIzaSyDK1VxJA97m6HCraScyH1zcHObzPwR57Vk").then((e=>{if(!e.ok)throw new Error("API request failed");return console.log("API request successful"),e.json()})).then((e=>{const n=e.items;if(console.log(n.summary),!n||0===n.length)return void console.log("No holiday data found.");const o=new Date(t);n.forEach((e=>{const t=new Date(e.start.date);if(o.getTime()===t.getTime())console.log("Today is a holiday:",e.summary),document.getElementById("holidays").textContent=`Happy ${e.summary}`,a(e.summary);else{const n=t.getTime()-o.getTime(),i=Math.ceil(n/864e5);i>0&&i<=10&&(a(e.summary),console.log(`Holiday '${e.summary}' is coming up in ${i} days on ${e.start.date}`),document.getElementById("holidays").textContent=`${e.summary} is coming up in ${i} Days`)}}))})).catch((e=>{console.error("Error fetching holiday data:",e)}))}})();